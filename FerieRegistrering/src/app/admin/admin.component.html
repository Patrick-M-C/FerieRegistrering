<h2>Brugeradministration</h2>

<button (click)="startCreate()">➕ Opret ny bruger</button>

<!-- CREATE POPUP -->
<div class="modal" *ngIf="creating">
  <div class="modal-content">
    <h3>Opret ny bruger</h3>

    <form (ngSubmit)="createUser()">
      <label>Fornavn:</label>
      <input type="text" [(ngModel)]="user.name" name="name" required />

      <label>Efternavn:</label>
      <input type="text" [(ngModel)]="user.lastName" name="lastName" required />

      <label>Email:</label>
      <input type="email" [(ngModel)]="user.email" name="email" required />

      <label>Fødselsdato:</label>
      <input type="date" [(ngModel)]="user.dateOfBirth" name="dateOfBirth" />

      <div class="modal-actions">
        <button type="submit">💾 Gem</button>
        <button type="button" (click)="cancelCreate()">❌ Annuller</button>
      </div>
    </form>
  </div>
</div>

<ul class="user-list">
  <li *ngFor="let user of users" class="user-item">
    {{ user.name }} {{ user.lastName }} - {{ user.email }} ({{ user.dateOfBirth | date:'dd/MM/yyyy' }})

    <div class="actions">
      <button (click)="editUser(user)">✏️ Rediger</button>
      <button (click)="deleteUser(user.id)">🗑️ Slet</button>
    </div>
  </li>
</ul>

<hr />

<!-- Popup til redigering -->
<div *ngIf="editingUser" class="popup">
  <div class="popup-content">
    <h3>Rediger bruger</h3>

    <label>Fornavn:</label>
    <input [(ngModel)]="editingUser.name" />

    <label>Efternavn:</label>
    <input [(ngModel)]="editingUser.lastName" />

    <label>Email:</label>
    <input [(ngModel)]="editingUser.email" />

    <label>Fødselsdato:</label>
    <input type="date" [(ngModel)]="editingUser.dateOfBirth" />

    <div class="popup-actions">
      <button (click)="saveUser()">💾 Gem</button>
      <button (click)="closeEdit()">❌ Annuller</button>
    </div>
  </div>
</div>
